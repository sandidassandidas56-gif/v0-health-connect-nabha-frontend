"use strict";(()=>{var e={};e.id=185,e.ids=[185],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},20028:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>b,patchFetch:()=>v,requestAsyncStorage:()=>h,routeModule:()=>S,serverHooks:()=>y,staticGenerationAsyncStorage:()=>f});var n={};t.r(n),t.d(n,{POST:()=>g});var a=t(49303),i=t(88716),o=t(60670),s=t(87070),p=t(9487),d=t(11185),c=t.n(d);let u=new(c()).Schema({patient:{type:c().Schema.Types.ObjectId,ref:"User",required:!0},doctor:{type:c().Schema.Types.ObjectId,ref:"User",required:!0},medicines:[{name:String,dosage:String,instructions:String}],address:{type:Object,required:!0},ashaWorker:{type:c().Schema.Types.ObjectId,ref:"User"},createdAt:{type:Date,default:Date.now}}),l=c().models.Prescription||c().model("Prescription",u);var m=t(2690);async function g(e){await (0,p.v)();let{patientId:r,doctorId:t,medicines:n,address:a}=await e.json(),i=await m.Z.findOne({role:"asha","address.pincode":a.pincode}),o=await l.create({patient:r,doctor:t,medicines:n,address:a,ashaWorker:i?._id});return s.NextResponse.json({success:!0,prescription:o})}let S=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/prescriptions/create/route",pathname:"/api/prescriptions/create",filename:"route",bundlePath:"app/api/prescriptions/create/route"},resolvedPagePath:"D:\\v0-health-connect-nabha-frontend\\frontend\\app\\api\\prescriptions\\create\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:h,staticGenerationAsyncStorage:f,serverHooks:y}=S,b="/api/prescriptions/create/route";function v(){return(0,o.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:f})}},9487:(e,r,t)=>{t.d(r,{v:()=>o});var n=t(11185),a=t.n(n);let i=global.mongoose||{conn:null,promise:null};async function o(){return i.conn||(i.promise||(i.promise=a().connect("mongodb+srv://sandidassandidas56_db_user:jDadHJOKbzXGhdNM@cluster0.hnna6hc.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0",{bufferCommands:!1}).then(e=>e)),i.conn=await i.promise,global.mongoose=i),i.conn}},2690:(e,r,t)=>{t.d(r,{Z:()=>o});var n=t(11185),a=t.n(n);let i=new n.Schema({email:{type:String,required:!0,unique:!0},password:{type:String,required:!0},role:{type:String,required:!0},phone:String,licenseNumber:String,specialization:String,workerId:String,address:{fullName:String,fatherName:String,atpo:String,dist:String,state:String,pin:String,landmark:String},age:Number,gender:String,adhaar:String}),o=a().models.User||a().model("User",i)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[276,972],()=>t(20028));module.exports=n})();